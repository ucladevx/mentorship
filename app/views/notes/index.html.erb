<html>
  <head>
    <title>Mentorship</title>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag ('homepage.js') %>
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <script>
      /*basically instead of dynamically updating the webpage using info from the database
      I'm posting to the database and then seperately having javascript logic change it
      */
      var isSignedIn = <%= user_signed_in? %>
      var upvoted = false;
      function incrementRep() {
        if (isSignedIn) { //if not signed in do nothing
          if (upvoted) { //if upvoted, then unupvote
            document.getElementById('Rep').innerHTML = String(Number(document.getElementById('Rep').innerHTML)-1);
            upvoted = false;
          }
          else { //upvote
            document.getElementById('Rep').innerHTML = String(Number(document.getElementById('Rep').innerHTML)+1);
            upvoted = true;
          }
        }
      }
    </script>
  </head>
  <body>

  <div class="grid-container">
    <div class="grid grid-notes">

       <div class="col lg-6 md-6 sm-12">
        <div class="card grid-item">
          <h3 class="title">Title of card here</h3>
          <div class="more icons">
            <i class="fa fa-eye" aria-hidden="true"></i>
            <i class="fa fa-download" aria-hidden="true"></i>
          </div>
        </div>
       </div>
      <div class="col lg-6 md-6 sm-12">
        <div class="card grid-item">
        </div>
       </div>
       <div class="col lg-6 md-6 sm-12">
        <div class="card grid-item">
        </div>
       </div>
       <div class="col lg-6 md-6 sm-12">
        <div class="card grid-item">
        </div>
       </div>
       <div class="col lg-6 md-6 sm-12">
        <div class="card grid-item">
        </div>
       </div>
       <div class="col lg-6 md-6 sm-12">
        <div class="card grid-item">
        </div>
       </div>

    </div>
  </div>

  <%= link_to "New Note", new_note_path, class: "btn btn-primary" %>

<br />

<!-- How to change depending on if User is signed in -->
<% if user_signed_in? %>
<div> Hi, you are signed in <%= @user.email %></div>
<% else %>
<div> You are not signed in </div>
<% end %>

<%= link_to "New Note", new_note_path, class: "btn btn-primary" %>
<br />
<br />

<table class = "table table-bordered table-striped">
   <thead>.
      <tr>
         <th>Title</th>
         <th>Download Link</th>
         <th> </th>
      </tr>
   </thead>

   <tbody>
      <% @notes.each do |note| %>
         <tr>
            <td><%= note.title %></td>
            <td><%= link_to "Download Note", note.ufile.url %></td>
            <td><%= button_to "Delete",  note, method: :delete, class: "btn btn-danger", confirm: "Are you sure that you wish to delete #{note.title}?" %></td>
            <!--if signed in and didnt upvote it, allow upvoting. To input image as link, link_to image_tag("Search.png", border: 0), upvote_path....-->
            <td
              <% if user_signed_in? %>
                onclick="incrementRep()">
                <% if @user.upvotednotes.include?(note.id) %>
                  <%= link_to "^", upvote_path(note) %>
                  <!-- change "^" to what you want someone who already upvoted note to see -->
                <% else %>
                  <%= link_to "v", upvote_path(note) %>
                  <!-- change "v" to what you want someone who didnt vote it to see -->
                <% end %>
              <% else %> <!--put what you want someone not logged in to see here-->
                > x
              <% end %>
            </td>
            <td id = "Rep" ><%= note.reputation %></td>
         </tr>
      <% end %>
   </tbody>

</table>
</body>
</html>
